# **導入・プレイガイド**
※注意：本ガイドは簡易版です。記載内容に誤りや不明瞭な点を発見された場合は、作者までご連絡ください。
## 事前準備

1. **重要**：
   BVE Trainsim をこれまで一度も触ったことがない方は、ウェブ上で初心者向けのガイドを検索しておすすめします。
2. Windowsの基本操作（ファイル／フォルダのコピー・移動、テキストファイルの編集と保存、ZIPの解凍など）に不慣れな方は、**まずPCの基礎操作を学んでから GSR の導入を検討することを強く推奨します。**
---
## インストール
### BVE Trainsim 本体の導入

[BVE Trainsim](https://bvets.net/jp/download/)の詳細なインストール方法については、初心者向けのガイドなどを参照してください。
ここでは特に注意すべき点のみ記載します。
1. BVE Trainsim は **Windows 専用ソフト**です。
   他のOSでも特殊な方法で動作させることは可能ですが、手順が非常に複雑なため、本ガイドの対象外とします。
2. GSRシナリオは、**BVE 5.8** にて正常動作を確認しています。
   それ以外のバージョンでは、予期しない不具合が発生する可能性があります。
---
## GSR 路線パッケージの導入
### 1. 手動導入

1. プロジェクトの GitHub リポジトリ右側にある **Releases** から、最新版の路線パッケージをダウンロードし、解凍してください。

   ※リポジトリ内のファイルは開発用であり、そのままでは正常に動作しない可能性があります。
   また、配布版にも全素材・全リソースは含まれていません。
   開発版を使用したい場合は、別途開発者向けドキュメントを参照してください。

2. `GSR\Timetables` フォルダ内には、フォルダ名の前後に「++」が付いたディレクトリが存在します
   （現時点では `1-Gensokyo Loop Line Clockwise` のみ）。

   その中にある `121M-ATSP+SN_A&C.txt` のような txt ファイルが、BVE における **シナリオ（運転ダイヤ）** です。
   ※ファイル名の意味については後述します。

3. BVE の「シナリオ選択（シナリオの選択）」画面で
   `GSR\Timetables\++ 1-Gensokyo Loop Line Clockwise ++`
   を開くと、環状線の全シナリオが表示されます。

### 2. 自動導入および継続的アップデート（予定）

※現在計画中です。

## 列車データの導入

GSR 路線を導入すると、すべてのシナリオは BVE 上に表示されますが、
初期状態では **路線付属のデフォルト車両（E127系）** が使用されます。

よりリアルな運転体験を得るためには、各作者が制作した列車データを別途導入する必要があります。

---

### デフォルト車両（E127系）が使用可能なシナリオ

他の列車データを導入しない場合でも、以下のシナリオでは E127 系での運転が可能です。

| 列車番号 | シナリオファイル名   |
| -------- | -------------------- |
| 15M      | なし                 |
| 101M     | 101M-ATSsn_N&A&C.txt |
| 121M     | 121M-ATSsn_N&A&C.txt |
| 127M     | 127M-ATSsn_N&A&C.txt |

使用しないシナリオについては、
`Vehicle =` 行の先頭に **セミコロン（;）** を付けることでコメントアウトでき、
BVE のシナリオ選択画面に表示されなくなります。

## 適切な列車の選択

GSRシナリオでは、路線付属の E127 系以外にも、
**信号プラグインの違いに対応した複数のシナリオ** が用意されています。
プレイヤーは、路線設定および自身の好みに応じて、適切な列車データを選択できます。

---

### 路線設定

現在の GSR 環状線の主な仕様は以下の通りです。

* 軌間：1067mm
* 最高速度：120km/h
* 電化方式：直流 1.5kV 架空電車線方式

使用されている信号・保安装置は以下の通りです。

* ATS-P
  （博麗神社 ～ 人間の里 ～ 守矢神社 間）
* ATS-SN（全線）
* ATS-Ps（121M シナリオのみ）

編成条件は次の通りです。

* 特急列車：6両編成以下（120m 以下）
* 普通・快速列車：4両編成以下（80m 以下）
* 風神の湖駅・霧の湖駅に停車する場合：**3両編成以下（60m 以下）**

---

### 信号プラグインについて

BVE では、同じ ATS 方式であっても、
作者や仕様の異なる **複数の信号プラグイン** が存在します。

GSR 路線で使用されている主なプラグインは以下の通りです。

| プラグイン名               | GSR 内での略称 |
| -------------------------- | -------------- |
| 汎用 ATS プラグイン        | Notsuki        |
| ask&CT 製 ATS-P プラグイン | ask&CT（A&C）  |
| Rock_On 製 snp.dll         | snp            |
| Rock_On 製 swp2.dll        | swp2           |

* 「**N&A&C**」
  → Notsuki および ask&CT の両方に対応した列車が使用可能
* 「**NoSC**」
  → 速度照査なし。ATS-S 対応列車であれば使用可能

列車がどのプラグインを使用しているかの確認方法は、後述します。

---

### 動作確認済みの列車データ

導入時のトラブルを避けたい場合、
以下はシナリオのテスト時に使用され、**安定動作が確認されている列車データ** です。
（各列車の詳細については、配布元サイトをご参照ください）

| 列車番号＼信号方式 | ATS-P/Ps（Ask）                                               | ATS-P/SN（Ask&CT）                                            | snp                                                    | swp2                                                                 |
| ------------------ | ------------------------------------------------------------- | ------------------------------------------------------------- | ------------------------------------------------------ | -------------------------------------------------------------------- |
| 15M                | -                                                             | [E653系](https://miso-yk.wixsite.com/ci19/e653)               | -                                                      | [283系](https://a43.jimdofree.com/bve-trainsim/283%E7%B3%BB/)/381系¹ |
| 101M               | -                                                             | [E129系](https://mc1323bve.blogspot.com/2020/03/jr-e129.html) | [211系](https://sigf.sakura.ne.jp/bve_211.html)        | [221系](https://mudamc22078.blog.fc2.com/blog-entry-296.html)        |
| 121M               | [E129系](https://mc1323bve.blogspot.com/2020/03/jr-e129.html) | [E129系](https://mc1323bve.blogspot.com/2020/03/jr-e129.html) | [211系](https://sigf.sakura.ne.jp/bve_211.html)/115系² | [221系](https://mudamc22078.blog.fc2.com/blog-entry-296.html)        |
| 127M               | -                                                             | [E129系](https://mc1323bve.blogspot.com/2020/03/jr-e129.html) | [211系](https://sigf.sakura.ne.jp/bve_211.html)/115系² | [221系](https://mudamc22078.blog.fc2.com/blog-entry-296.html)        |

¹ JRTrainPack 内
`Rock_On\Train\JR\Formation\hine\D601.txt`

² JRTrainPack 内
`Rock_On\Train\JR\Formation\tota\M33_3.txt`

なお、過去には [EF81 形電気機関車](http://waisroom.sakura.ne.jp/) も使用されており、
将来的に再登場する可能性があるため、リンクを残しています。

---

## 列車データを BVE に導入する
### 列車データの入手
列車データは、各作者の公式サイトにて配布されています。
ダウンロード方法は作者ごとに異なるため、ここでは詳細を省略します。

多くの場合、列車データは ZIP 等の圧縮形式で配布されているため、解凍後に使用してください。

#### JRTrainPack について

[JRTrainPack](https://mikangogo.github.io/posts/jrtrainpack/) は、多数の列車データとプラグインを含む統合パッケージです。
GSRシナリオで使用可能な列車も多く含まれています。

---

### 使用している信号プラグインの確認方法

1. **作者の説明を確認する**
   配布ページや readme に、必要なプラグインが記載されていることが多いです。

2. **ファイル構成から判断する**
   列車フォルダ内に `ATS` 等の名称のフォルダがあり、
   その中に信号プラグイン名と一致するファイルやフォルダが存在します。

   `DetailManager.dll` がある場合は、
   `detailmodules.txt` に記載されている DLL のパスを確認してください。

---

### 列車プラグインの導入方法

#### 1. JRTrainPack内のプラグインを使用する場合

`detailmodules.txt` 内に
`../../../../Rock_On\Train\JR\Plugin\***.dll`のような記述がある場合、JRTrainPack をそのパスに合致する位置へ配置すれば動作します。

#### 2. GeneralAtsPlugin を使用する場合

`detailmodules.txt` 内に`../../../GeneralAtsPlugin\Rock_On\***.dll`のような記述がある場合、指定されたディレクトリにプラグインを配置してください。

※複数の列車で同一プラグインを使用する場合、
任意の共通ディレクトリにまとめ、
`detailmodules.txt` のパスを書き換えることも可能です。

---

### シナリオファイルで列車を変更する

1. 列車データ内にある `Vehicle.txt`（または同等のファイル）を確認し、
   使用したい列車のパスを控えておきます。

2. `GSR\Timetables\++ 1-Gensokyo Loop Line Clockwise ++`
   内のシナリオファイルを開き、
   `Vehicle =` 行に上記のパスを記述してください。

これで BVE 上で GSRシナリオを運転できます。

---

### 注意事項（BVE 5.8 以降）

BVE 5.8 では、
シナリオファイル内で指定されている`Route =`、`Vehicle =`の **いずれかのパスが不正確な場合**、そのシナリオは選択画面に表示されません。

表示されない場合は、まずこれらのパスを確認してください。
それでも解決しない場合は、Issue への報告、または作者へ連絡してください。

---

## プレイについて

### 路線情報

#### 路線図

<p align="center">
    <img src="maps/LoopLine-Real.png" alt="routemap";>
</p>

### 技術仕様

```
軌間：1067mm
最高速度：120km/h
最小曲線半径：300m
最大勾配：27.2‰
電化方式：直流1.5kV 架空電車線
信号方式：
ATS-P（博麗神社～人間の里～守矢神社）
ATS-Ps / ATS-SN（全線）
```

---

### 距離について

各駅間の距離は、作者独自の設定であり、
東方 Projectの原作とは関係ありません。
また、幻想郷の大きさに関する他者の解釈とも一致しない可能性があります。

距離は **0.01km 単位** で設定されています。
詳細は [dev.md](dev_jp.md) を参照してください。

---

## 運転可能な列車（シナリオ）

### 15M
L特急「**あゆのかぜ**」。この愛称は『東方萃夢想』中の曲名に由来します。

博麗神社を出発し、環状線を一周して再び博麗神社へ戻ります。
最高速度は 120km/h。その中の`swp2プラグイン`対応シナリオでは、高性能振り子車両（R600 +35km/h）が使用可能です。

所要時間：<br>
通常の特急車両：約56分　振り子車両使用時：約54分

※振り子機能は実験性の要素であり、カント設定の変更により傾斜を再現しています。
振り子動作は実際と異なる可能性があります。（博麗神社～南人間の里、命蓮寺～守矢神社間のみ有効）

---

### 101M
快速「もりや」。最高速度 110km/h。博麗神社～人間の里～守矢神社間のみ運転。所要時間：約35分。

---

### 121M
各駅停車の普通列車。博麗電車区を出区後、環状線を一周します。最高速度 95km/h。所要時間：約1時間24分。

---

### 127M
普通列車。博麗神社～人間の里～守矢神社間のみ運転。最高速度 95km/h。所要時間：約47分。

---

### 時刻表

※15M は **通常特急車両（非振り子）** のダイヤ。

| 駅名         | L特急あゆのかぜ 15M | 快速もりや 101M | 普通 121M | 普通 127M |
| ------------ | -------------------- | --------------- | --------- | --------- |
| 博麗神社     | 1006                 | 0937            | 0721      | 1126      |
| 南博麗       | ↓                    | ↓               | 0726      | 1131      |
| 永遠亭       | 1015                 | 0946            | 0732      | 1137      |
| 竹林         | ↓                    | ↓               | 0736      | 1140      |
| 南人間の里   | ↓                    | ↓               | 0742      | 1147      |
| 人間の里     | 1025                 | 0955            | 0747      | 1151      |
| 西人間の里   | ↓                    | 0959            | 0750      | 1155      |
| 命蓮寺       | 1031                 | 1003            | 0755      | 1200      |
| 北命蓮寺     | ↓                    | ↓               | 0757      | 1202      |
| 妖怪の樹海   | ↓                    | ↓               | 0802      | 1207      |
| 草田         | ↓                    | ↓               | 0805      | 1210      |
| 守矢神社     | 1040                 | 1012            | 0810      | 1212      |
| 風神の湖     | ↓                    | =               | 0813      | =         |
| 東守矢（信） | ↓                    |                 | ↓         |           |
| 玄武の沢     | ↓                    |                 | 0820      |           |
| 香霖堂前     | 1052                 |                 | 0825      |           |
| 魔法の森     | ↓                    |                 | 0828      |           |
| 霧の湖       | ↓                    |                 | 0832      |           |
| 紅魔館       | 1058                 |                 | 0836      |           |
| 上霧の湖     | ↓                    |                 | 0840      |           |
| 北博麗       | ↓                    |                 | 0842      |           |
| 博麗神社     | 1103                 |                 | 0845      |           |
---

## 運転操作について
BVE の基本操作については、初心者向けのガイドをご覧ください。列車データごとに操作方法や機能は異なる可能性もあります、詳細は、各列車作者が提供している説明書をご確認ください。